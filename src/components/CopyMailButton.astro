---
import Check from '@public/icons/Check.astro'
import Copy from '@public/icons/Copy.astro'

const { href } = Astro.props
---

<a
	id="copyButton"
	target="_blank"
	href={href}
	role="link"
	class="text-md group inline-flex max-h-fit max-w-fit items-center justify-center gap-2 rounded-xl border border-gray-300 bg-gray-100 px-3 py-2 text-base text-gray-800 transition hover:border-gray-900 hover:bg-gray-800 hover:text-white focus:outline-none focus-visible:outline-none focus-visible:ring focus-visible:ring-white focus-visible:ring-yellow-500/80 focus-visible:ring-offset-2 active:bg-black dark:border-gray-600 dark:bg-[#303030] dark:text-white dark:hover:border-gray-300 dark:hover:bg-gray-100 dark:hover:text-black"
>
	<Copy id="copyIcon" class="size-6" />
	<Check id="successIcon" class="hidden size-6" />
</a>

<script is:inline>
	document.addEventListener('DOMContentLoaded', () => {
		const copyButton = document.getElementById('copyButton')
		const copyIcon = document.getElementById('copyIcon')
		const successIcon = document.getElementById('successIcon')
		if (copyButton) {
			copyButton.addEventListener('click', () => {
				navigator.clipboard.writeText('victorperezbarrancodev@gmail.com').then(() => {
					copyIcon?.classList.add('hidden')
					successIcon?.classList.remove('hidden')
					setTimeout(() => {
						copyIcon?.classList.remove('hidden')
						successIcon?.classList.add('hidden')
					}, 2000)
				})
			})
		}
	})
</script>
